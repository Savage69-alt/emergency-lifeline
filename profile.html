<!DOCTYPE html>
<html>
<head>
  <title>Emergency Profile</title>

  <style>
    body {
      font-family: Arial;
      background: #fff;
      padding: 20px;
    }

    .card {
      border: 2px solid red;
      padding: 20px;
      border-radius: 10px;
    }

    button {
      padding: 12px;
      font-size: 16px;
      margin-top: 10px;
      width: 100%;
    }

    .call {
      background: green;
      color: white;
    }

    .sos {
      background: red;
      color: white;
    }
  </style>
</head>

<body>

<h1>üö® Emergency Info</h1>

<div class="card" id="info"></div>

<button class="call" onclick="callContact()">üìû Call Contact</button>

<button class="sos" onclick="sendSOS()">üÜò SEND SOS</button>

<p id="location"></p>

<h2>üè• Nearby Hospitals</h2>
<iframe
  width="100%"
  height="300"
  src="https://www.google.com/maps?q=hospital&output=embed">
</iframe>

<script>

let params = new URLSearchParams(window.location.search);

let name = params.get("name");
let blood = params.get("blood");
let allergy = params.get("allergy");
let contact = params.get("contact");

document.getElementById("info").innerHTML =
  "<b>Name:</b> " + name + "<br>" +
  "<b>Blood:</b> " + blood + "<br>" +
  "<b>Allergy:</b> " + allergy + "<br>" +
  "<b>Contact:</b> " + contact;


document.getElementById("info").innerHTML =
  "<b>Name:</b> " + data.name + "<br>" +
  "<b>Blood:</b> " + data.blood + "<br>" +
  "<b>Allergy:</b> " + data.allergy + "<br>" +
  "<b>Contact:</b> " + data.contact;

function callContact() {

  if (!contact) {
    alert("No contact number available");
    return;
  }

  let phone = contact.trim();

  // Add +91 if user entered 10-digit Indian number
  if (phone.length === 10 && !phone.startsWith("+")) {
    phone = "+91" + phone;
  }

  window.location.href = "tel:" + phone;
}



function sendSOS() {

  if (!navigator.geolocation) {
    alert("Geolocation not supported");
    return;
  }

  navigator.geolocation.getCurrentPosition(

    function(pos) {

      let lat = pos.coords.latitude;
      let lon = pos.coords.longitude;

      document.getElementById("location").innerHTML =
        "üö® SOS SENT! Location:<br>" +
        lat + ", " + lon;

    },

    function(error) {
      alert("Location access denied or unavailable");
    }

  );
}


</script>

</body>
</html>
